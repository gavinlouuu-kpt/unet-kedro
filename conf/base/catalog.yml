# in conf/base/catalog.yml
# In_focus_background:
#   type: pillow.ImageDataset
#   filepath: data/01_raw/In_focus/background.tiff

"{namespace}.original_partition":
  type: partitions.PartitionedDataset
  dataset: pillow.ImageDataset
  path: data/01_raw/{namespace}/
  filename_suffix: ".tiff"

# original_Slight_under_focus_partition:
#   type: partitions.PartitionedDataset
#   dataset: pillow.ImageDataset
#   path: data/01_raw/Slight_under_focus/
#   filename_suffix: ".tiff"

"{namespace}.filtered_images":
  type: pickle.PickleDataset
  filepath: data/02_intermediate/opencv_benchmark/filtered_images/{namespace}/{namespace}.pkl

# filtered_Slight_under_focus:
#   type: pickle.PickleDataset
#   filepath: data/02_intermediate/opencv_benchmark/filtered_images/Slight_under_focus_images.pkl

# Segmentation labels
"{namespace}.segmentation_labels":
  type: json.JSONDataset
  filepath: data/01_raw/{namespace}/{namespace}.json

# segmentation_labels_Slight_under_focus:
#   type: json.JSONDataset
#   filepath: data/01_raw/Slight_under_focus/Slight_under_focus.json

# Reconstructed masks
"{namespace}.reconstructed_sam_masks":
  type: pickle.PickleDataset
  filepath: data/02_intermediate/opencv_benchmark/sam_masks/{namespace}.pkl

# reconstructed_sam_masks_Slight_under_focus:
#   type: pickle.PickleDataset
#   filepath: data/02_intermediate/opencv_benchmark/sam_masks/Slight_under_focus.pkl


# Opencv processed images
"{namespace}.general_roi_coordinates":
  type: pandas.CSVDataset
  filepath: data/02_intermediate/opencv_benchmark/general_roi_coordinates.csv

"{namespace}.cv_processed":
  type: pickle.PickleDataset
  filepath: data/02_intermediate/opencv_benchmark/cv_processed_images/{namespace}/{namespace}.pkl

"{namespace}.cv_processed_timing":
  type: pandas.CSVDataset
  filepath: data/02_intermediate/opencv_benchmark/cv_processed_images/{namespace}/{namespace}_cv_processed_timing.csv

# "cv_processed_{namespace}":
#   type: pickle.PickleDataset
#   filepath: data/02_intermediate/opencv_benchmark/cv_processed_images/Slight_under_focus/Slight_under_focus.pkl

# cv_processed_timing_Slight_under_focus:
#   type: pandas.CSVDataset
#   filepath: data/02_intermediate/opencv_benchmark/cv_processed_images/Slight_under_focus/cv_processed_timing_Slight_under.csv

# Opencv plots and figures
# with different params on In_focus and Slight_under compare iou and dice to SAM


# Comparison metrics between SAM and OpenCV
"{namespace}.mask_comparison_metrics":
  type: pandas.CSVDataset
  filepath: data/08_reporting/opencv_benchmark/{namespace}_mask_comparison_metrics.csv
  save_args:
    index: False

# mask_comparison_metrics_Slight_under_focus:
#   type: pandas.CSVDataset
#   filepath: data/08_reporting/opencv_benchmark/mask_comparison_metrics_Slight_under_focus.csv
#   save_args:
#     index: False

"{namespace}.cv_overlays":
  type: partitions.PartitionedDataset
  path: data/08_reporting/opencv_benchmark/overlays/{namespace}/cv
  filename_suffix: ".png"
  dataset: pillow.ImageDataset

"{namespace}.sam_overlays":
  type: partitions.PartitionedDataset
  path: data/08_reporting/opencv_benchmark/overlays/{namespace}/sam
  filename_suffix: ".png"
  dataset: pillow.ImageDataset

"{namespace}.combined_overlays":
  type: partitions.PartitionedDataset
  path: data/08_reporting/opencv_benchmark/overlays/{namespace}/combined
  filename_suffix: ".png"
  dataset: pillow.ImageDataset

# Slight_under_focus_cv_overlays:
#   type: partitions.PartitionedDataset
#   path: data/08_reporting/opencv_benchmark/overlays/Slight_under_focus/cv
#   filename_suffix: ".png"
#   dataset: pillow.ImageDataset

# Slight_under_focus_sam_overlays:
#   type: partitions.PartitionedDataset
#   path: data/08_reporting/opencv_benchmark/overlays/Slight_under_focus/sam
#   filename_suffix: ".png"
#   dataset: pillow.ImageDataset

# Slight_under_focus_combined_overlays:
#   type: partitions.PartitionedDataset
#   path: data/08_reporting/opencv_benchmark/overlays/Slight_under_focus/combined
#   filename_suffix: ".png"
#   dataset: pillow.ImageDataset

######################### SAM prediction pipeline

# Cropped images for SAM prediction
cropped_images_In_focus:
  type: partitions.PartitionedDataset
  dataset: pillow.ImageDataset
  path: data/05_model_input/sam_prediction/In_focus/
  filename_suffix: ".tiff"

cropped_images_Slight_under_focus:
  type: partitions.PartitionedDataset
  dataset: pillow.ImageDataset
  path: data/05_model_input/sam_prediction/Slight_under_focus/
  filename_suffix: ".tiff"

# SAM prediction outputs
prompted_sam_masks_In_focus:
  type: partitions.PartitionedDataset
  dataset: pillow.ImageDataset
  path: data/07_model_output/sam_prediction/In_focus/
  filename_suffix: ".tiff"
  
prompted_sam_masks_Slight_under_focus:
  type: partitions.PartitionedDataset
  dataset: pillow.ImageDataset
  path: data/07_model_output/sam_prediction/Slight_under_focus/
  filename_suffix: ".tiff"
  
# Timing data outputs
sam_prediction_timing_In_focus:
  type: pandas.CSVDataset
  filepath: data/07_model_output/sam_prediction/In_focus/timing_data.csv
  save_args:
    index: False

sam_prediction_timing_Slight_under_focus:
  type: pandas.CSVDataset
  filepath: data/07_model_output/sam_prediction/Slight_under_focus/timing_data.csv
  save_args:
    index: False

########################################################datascience pipeline

# Paired Image to Segmentation dataset
segmentation_dataset_In_focus:
  type: pickle.PickleDataset
  filepath: data/02_intermediate/model_training/segmentation_dataset.pkl

# Training datasets
train_dataset:
  type: pickle.PickleDataset
  filepath: data/02_intermediate/model_training/train_dataset.pkl

val_dataset:
  type: pickle.PickleDataset
  filepath: data/02_intermediate/model_training/val_dataset.pkl

trained_unet:
  type: pickle.PickleDataset
  filepath: data/06_models/model_training/unet_model.pkl